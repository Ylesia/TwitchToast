<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">

  <title>Twitch Toast :: Admin Beta</title>

  <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
  <link type="text/css" rel="stylesheet" href="css/beta.css"  media="screen,projection"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <script type="text/javascript" src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="js/dragAndDrop.js"></script>
  <script type="text/javascript" src="js/toastengine.js"></script>
</head>

<body id="page-top">
  <header>
    <nav class="top-nav">
      <div class="container">
        <div class="nav-wrapper"><a class="page-title">Administration :: Beta</a></div>
      </div>
    </nav>
    <div class="container"><a href="#" data-activates="nav-mobile" class="button-collapse top-nav full hide-on-large-only"><i class="material-icons">menu</i></a></div>
    <ul id="nav-mobile" class="side-nav fixed">
      <li class="bold"><a href="#" class="waves-effect waves-teal">Scene 1</a></li>
      <li class="bold"><a href="#" class="waves-effect waves-teal">Scene 2</a></li>
      <li class="bold"><a href="#" class="waves-effect waves-teal">Scene 3</a></li>
      <li class="bold"><a href="#" class="waves-effect waves-teal">Scene 4</a></li>
      <li class="bold"><a href="#" class="waves-effect waves-teal">Scene 5</a></li>
    </ul>
  </header>

  <main>
    <div class="container">
      <div class="card">
        <div class="card-content">
          <div class="row">
            <div class="col s12 m9">
              <h1 class="header center-on-small-only">Enhance your titles</h1>
              <h4 class ="light red-text text-lighten-4 center-on-small-only">Input your different titles, manage the looping effect and reorder them</h4>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-content">
          <div class="row">
            <div class="col s12">
              <ul id="titles">
                <!-- will receive all the title modification -->
              </ul>

            </div>
            <div class="col right">
              <button class="btn waves-effect right" onclick="invalidateStore()">Save</button>
            </div>
            <div class="col left">
              <button class="btn waves-effect" onclick="addLayout()">Add a new layout</button>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-content">
          <div class="row">
            <div class="col s12">
              <label for="durationloop">
                <span>Durée de la boucle :</span>
                <select id="durationloop" name="duartionloopselector">
                  <option value="300">5min</option>
                  <option value="600">10min</option>
                  <option value="900">15min</option>
                  <option value="1200">20min</option>
                  <option value="1500">25min</option>
                  <option value="1800">30min</option>
                  <option value="3600">1h</option>
                </select>
              </label>
              <button class="btn waves-effect right" onclick="updateLoopList()">Loop</button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </main>

  <footer class="page-footer">
    <div class="footer-copyright">
      <div class="container">
        © 201X
        <a class="grey-text text-lighten-4 right" href="https://github.com/Dogfalo/materialize/blob/master/LICENSE">MIT License</a>
      </div>
    </div>
  </footer>

  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/jquery.numeric.min.js"></script>
  <script type="text/javascript" src="js/materialize.min.js"></script>
  <script type="text/javascript" src="js/materialize.init.js"></script>
  <script type="text/javascript" src="js/store.min.js"></script>
  <script type="text/javascript" src="js/admin.store.js"></script>
  <script type="text/javascript">
  var DEFAULT_TITLES_CARD = 9;

  $(document).ready(function() {
    var i = 0;
    var storage_length = 0;

    checkStore();

    var data = getStoredData();
    if(data && data.length > 0)
    storage_length = data.length;

    storage_length = Math.max(DEFAULT_TITLES_CARD, storage_length);


    var titles = $("#titles");
    for(;i<storage_length;i++){
      titles.append(
        "<li draggable=\"true\" ondragenter=\"dragenter(event)\" ondragstart=\"dragstart(event)\" ondragend=\"invalidateStore()\">"+
        "  <div class=\"row\">"+
        "    <div class=\"col s1 input-field\">"+
        "     <i class=\"material-icons hamburger-black\">menu</i>"+
        "    </div>"+
        "    <div class=\"col s3 input-field\">"+
        "      <input type=\"text\" name=\"title\" id=\"title"+i+"\" length=\"10\" />"+
        "      <label for=\"title"+i+"\">Title</label>"+
        "    </div>"+
        "    <div class=\"col s2 input-field\">"+
        "      <input type=\"text\" name=\"duration\" id=\"duration"+i+"\" />"+
        "      <label for=\"duration"+i+"\">Duration</label>"+
        "    </div>"+
        "    <div class=\"col s2 input-field\">"+
        "      <input type=\"checkbox\" name=\"loop\" id=\"loop"+i+"\" />"+
        "      <label for=\"loop"+i+"\">loop</label>"+
        "    </div>"+
        "    <div class=\"col s2 input-field\">"+
        "      <button class=\"btn waves-effect\" onclick=\"updateTitle("+i+")\">Update Title</button>"+
        "    </div>"+
        "    <div class=\"col s2 input-field\">"+
        "      <button class=\"btn waves-effect\" onclick=\"endTitle("+i+")\">End</button>"+
        "    </div>"+
        "  </div>"+
        "</li>");

        $("#title"+i).characterCounter();
        $("#duration"+i).numeric();
      }

      restoreStore();
    });
    </script>
  </script>
</body>
</html>
